[{"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\index.js":"1","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\App.js":"2","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\GlobalState.js":"3","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Home\\Home.js":"4","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Login\\Login.js":"5","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Signup\\Signup.js":"6","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Nav\\Nav.js":"7","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Schedule\\Schedule.js":"8","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\reducers.js":"9","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\mutations.js":"10","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\auth.js":"11","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\queries.js":"12","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\api.js":"13","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\actions.js":"14","C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Appointment\\Appointment.js":"15"},{"size":551,"mtime":1612230806037,"results":"16","hashOfConfig":"17"},{"size":2862,"mtime":1612306499404,"results":"18","hashOfConfig":"17"},{"size":496,"mtime":1612230806040,"results":"19","hashOfConfig":"17"},{"size":672,"mtime":1612230806005,"results":"20","hashOfConfig":"17"},{"size":2378,"mtime":1612230806007,"results":"21","hashOfConfig":"17"},{"size":2750,"mtime":1612230806018,"results":"22","hashOfConfig":"17"},{"size":1000,"mtime":1612309603118,"results":"23","hashOfConfig":"17"},{"size":5425,"mtime":1612322648667,"results":"24","hashOfConfig":"17"},{"size":665,"mtime":1612230806057,"results":"25","hashOfConfig":"17"},{"size":1561,"mtime":1612230806052,"results":"26","hashOfConfig":"17"},{"size":1015,"mtime":1612309576339,"results":"27","hashOfConfig":"17"},{"size":203,"mtime":1612230806055,"results":"28","hashOfConfig":"17"},{"size":1003,"mtime":1612308236048,"results":"29","hashOfConfig":"17"},{"size":162,"mtime":1612230806043,"results":"30","hashOfConfig":"17"},{"size":6671,"mtime":1612317021697,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"1obd0cv",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"34"},"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\index.js",[],["64","65"],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\App.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\GlobalState.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Home\\Home.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Login\\Login.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Signup\\Signup.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Nav\\Nav.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Schedule\\Schedule.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\reducers.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\mutations.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\auth.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\queries.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\api.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\utils\\actions.js",[],"C:\\Users\\roger\\Desktop\\projects\\lunar-video-app\\client\\src\\components\\Appointment\\Appointment.js",["66","67"],"import React, { useState, useCallback } from \"react\";\r\nimport { useMutation, useQuery, /* useDisclosure */ } from '@apollo/react-hooks';\r\n//import Auth from \"../../utils/auth\";\r\nimport api from \"../../api\"\r\nimport { ADD_APPOINTMENT } from \"../../utils/mutations\";\r\nimport { Container, \r\n          Heading, \r\n          FormControl, \r\n          FormLabel, \r\n          Input, \r\n          Button, \r\n          Select, \r\n          Text, \r\n          Box, \r\n        Flex } from \"@chakra-ui/react\";\r\n\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport 'react-calendar/dist/Calendar.css';\r\nimport { ME } from \"../../utils/queries\";\r\n\r\n\r\nfunction Appointment() {\r\n    // defining a state for the time for the schedule\r\n  const [startDate, setStartDate] = useState(new Date());\r\n  const [ok, setOK] = useState(false);\r\n  let email = '';\r\n  const {data} = useQuery(ME);\r\n  let a = data.me.appointment[0].day;\r\n  console.log(\"DAY -> \"+a);\r\n    \r\n    // defining a custon input for the datepicker\r\n    const CustomInput = ({ value, onClick }) => (\r\n        <Input type=\"day\" placeholder=\"mm/dd/yyy\"\r\n                name=\"day\"\r\n                color=\"white\"\r\n                onClick={onClick}\r\n                onChange={handleChange}\r\n                value={a}/>\r\n      ); \r\n\r\n  const [formState, setFormState] = useState({ day: '', time: ''});\r\n\r\n  //const [addAppointment] = useMutation(ADD_APPOINTMENT);\r\n \r\n  const [link, setLink] = useState('');\r\n\r\n\r\n  /* setFormState({...formState, day: data.me.appointment.day,  time: data.me.appointment.time})\r\n  setLink(data.me.appointment[0].link);  */\r\n\r\n  const createLink = useCallback(() => {\r\n    return api\r\n      .createRoom()\r\n      .then((room) => room.url)\r\n      .catch((error) => {\r\n        console.log('Error creating room', error);\r\n      });\r\n  }, []); \r\n\r\n  const handleFormSubmit = async event => {\r\n    event.preventDefault();\r\n      /************************************************* */\r\n      createLink().then((url) => {console.log(\"URL: \"+ url); setLink(url)});\r\n      //************************************************ */\r\n   /*  \r\n    console.log(formState.day)\r\n    console.log(formState.time)\r\n    console.log(link)\r\n    try{\r\n       await addAppointment({\r\n      variables: {\r\n        day: formState.day, time: formState.time, link: link\r\n      }\r\n    });\r\n    \r\n    if(data)\r\n         email = data.me.email;\r\n        else\r\n        console.log('no imprime nada')\r\n\r\n    console.log(email);\r\n\r\n    }catch (e) {\r\n        console.log(e)\r\n    }\r\n */\r\n\r\n    /*****************************************************/\r\n    /**Sending the mail with nodemailer */\r\n\r\n    let response = await fetch('/mail', {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n          day: formState.day,\r\n          time: formState.time,\r\n          link: link,\r\n          mail: email, \r\n          subject: 'Appointment Rescheduled on '\r\n      }),\r\n      headers: {\r\n          Accept: 'application/json',\r\n          'Content-Type': 'application/json'\r\n        },\r\n    }),\r\n      message = await response.json();\r\n      console.log(message);\r\n        //window.location.reload('/'); // we need to make anoter component to congratule the success of the operation\r\n\r\n    /*****************************************************/\r\n\r\n    /*****************setOK all operations ok***********************/\r\n   \r\n    setOK(true);\r\n    \r\n    /*****************************************************/\r\n  };\r\n\r\n  const handleChange = event => {\r\n    const { name, value } = event.target;\r\n/*     console.log(\"name \" + name);\r\n    console.log(\"value \" + value) */\r\n    setFormState({\r\n      ...formState,\r\n      [name]: value\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Heading  color=\"#faf0ca\" as=\"h2\" size=\"xl\" fontSize={{ base: \"16px\", md: \"20px\", lg: \"30px\" }} padding=\"3\">My Appointment</Heading>\r\n     \r\n      <FormControl>\r\n              <FormLabel color=\"#faf0ca\">Select day</FormLabel>\r\n              <DatePicker id=\"day\" name=\"day\"\r\n                    dateFormat=\"MM/dd/yyyy\"\r\n                    selected={startDate}\r\n                    minDate={new Date()}\r\n                    onChange={date => {setStartDate(date); setFormState({...formState, day: date.toLocaleDateString(\"en-US\")});}}\r\n                    customInput={<CustomInput/>}\r\n                />\r\n              <FormLabel color=\"white\">Time (Hr)</FormLabel>\r\n              <Select placeholder=\"Select option\" id=\"time\" name=\"time\"  onChange={handleChange} focusBorderColor=\"blue\" color=\"white\" borderColor=\"blue\">\r\n                    <option value=\"12:00pm\">12:00pm</option>\r\n                    <option value=\"2:00pm\">2:00pm</option>\r\n                    <option value=\"4:00pm\">4:00pm</option>\r\n                </Select>\r\n                <Text color=\"#faf0ca\" fontSize={{ base: \"8px\", md: \"12px\", lg: \"16px\" }} >Link: <a href=\"/\" target=\"_blank\" rel=\"noreferrer\">my link</a></Text>\r\n                 { ok ?\r\n                  <Box>\r\n                    <Text  padding=\"3\"></Text>\r\n                      <Text color=\"#faf0ca\" fontSize={{ base: \"8px\", md: \"12px\", lg: \"16px\" }}>An email was sent with the information below </Text>\r\n                      <Box borderRadius=\"md\">\r\n                          <Text color=\"#faf0ca\" fontSize={{ base: \"8px\", md: \"12px\", lg: \"16px\" }}>Day: {formState.day} </Text>\r\n                          <Text color=\"#faf0ca\" fontSize={{ base: \"8px\", md: \"12px\", lg: \"16px\" }}>Time: {formState.time}</Text>\r\n                          <Text color=\"#faf0ca\" fontSize={{ base: \"8px\", md: \"12px\", lg: \"16px\" }} >Link: <a href={link} target=\"_blank\" rel=\"noreferrer\">{link}</a></Text>\r\n                      </Box>   \r\n                  </Box>\r\n                  : null\r\n                 }\r\n                 <Flex>\r\n                    <Box>\r\n                        <Button\r\n                            mt={4}\r\n                            colorScheme=\"teal\"\r\n                            type=\"submit\"\r\n                            onClick={handleFormSubmit}\r\n                        >\r\n                        Reschedule\r\n                        </Button>\r\n                    </Box> \r\n                    <Box px=\"4\">\r\n                        <Button\r\n                            mt={4}\r\n                            colorScheme=\"teal\"\r\n                            type=\"submit\"\r\n                            onClick={handleFormSubmit}\r\n                        >\r\n                        Cancel\r\n                        </Button>\r\n                    </Box>\r\n\r\n                 </Flex>  \r\n            \r\n      </FormControl> \r\n\r\n    </Container>\r\n\r\n  );\r\n\r\n}\r\n\r\nexport default Appointment;\r\n",{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","severity":1,"message":"73","line":2,"column":10,"nodeType":"74","messageId":"75","endLine":2,"endColumn":21},{"ruleId":"72","severity":1,"message":"76","line":5,"column":10,"nodeType":"74","messageId":"75","endLine":5,"endColumn":25},"no-native-reassign",["77"],"no-negated-in-lhs",["78"],"no-unused-vars","'useMutation' is defined but never used.","Identifier","unusedVar","'ADD_APPOINTMENT' is defined but never used.","no-global-assign","no-unsafe-negation"]